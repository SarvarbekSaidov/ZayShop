<!-- extend base -->
{% extends 'base.html' %}
{% load static %}
{% block title %}Zay Shop - Home{% endblock %}
{% block content %}

{% if messages %}
    <div class="container my-4">
        {% for message in messages %}
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    </div>
{% endif %}

 <!-- Modal -->
 {% include 'components/modal.html' %}
    <!-- Start Banner Hero -->
    {% include 'components/main_banner.html' %}
    <!-- End Banner Hero -->
      <!-- Start Categories of The Month -->
       
      <section class="container py-5">
        <div class="row text-center pt-3">
            <div class="col-lg-6 m-auto">
                <h1 class="h1">Categories of The Month</h1>
                <p>
                    Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia
                    deserunt mollit anim id est laborum.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-md-4 p-5 mt-3">
                <a href="#"><img src="{% static './assets/img/category_img_01.jpg'%}" class="rounded-circle img-fluid border"></a>
                <h5 class="text-center mt-3 mb-3">Watches</h5>
                <p class="text-center"><a href="{% url 'main:shop' %}" class="btn btn-success">Go Shop</a></p>
            </div>
            <div class="col-12 col-md-4 p-5 mt-3">
                <a href="#"><img src="{% static './assets/img/category_img_02.jpg'%}" class="rounded-circle img-fluid border"></a>
                <h2 class="h5 text-center mt-3 mb-3">Shoes</h2>
                <p class="text-center"><a href="{% url 'main:shop' %}" class="btn btn-success">Go Shop</a></p>
            </div>
            <div class="col-12 col-md-4 p-5 mt-3">
                <a href="#"><img src="{% static './assets/img/category_img_03.jpg'%}" class="rounded-circle img-fluid border"></a>
                <h2 class="h5 text-center mt-3 mb-3">Accessories</h2>
                <p class="text-center"><a href="{% url 'main:shop' %}" class="btn btn-success">Go Shop</a></p>
            </div>
        </div>
    </section>
    <!-- End Categories of The Month -->

    <!-- Start Featured Product -->
    <section class="bg-light">
        <div class="container py-5">
            <div class="row text-center py-3">
                <div class="col-lg-6 m-auto">
                    <h1 class="h1">Featured Product</h1>
                    <p>
                        Reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                        Excepteur sint occaecat cupidatat non proident.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-4 mb-4">
                    <div class="card h-100">
                        <a href="{% if product.id %}{% url 'main:shop_single' product.id %}{% else %}#{% endif %}">
                            <img src="{% static './assets/img/feature_prod_01.jpg'%}" class="card-img-top" alt="...">
                        </a>
                        <div class="card-body">
                            <ul class="list-unstyled d-flex justify-content-between">
                                <li>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-muted fa fa-star"></i>
                                    <i class="text-muted fa fa-star"></i>
                                </li>
                                <li class="text-muted text-right">$240.00</li>
                            </ul>
                            <a href="{% if product.id %}{% url 'main:shop_single' product.id %}{% else %}#{% endif %}" class="h2 text-decoration-none text-dark">Gym Weight</a>
                            <p class="card-text">
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt in culpa qui officia deserunt.
                            </p>
                            <p class="text-muted">Reviews (24)</p>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-4">
                    <div class="card h-100">
                        <a href="{% if product.id %}{% url 'main:shop_single' product.id %}{% else %}#{% endif %}">
                            <img src="{% static './assets/img/feature_prod_02.jpg'%}" class="card-img-top" alt="...">
                        </a>
                        <div class="card-body">
                            <ul class="list-unstyled d-flex justify-content-between">
                                <li>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-muted fa fa-star"></i>
                                    <i class="text-muted fa fa-star"></i>
                                </li>
                                <li class="text-muted text-right">$480.00</li>
                            </ul>
                            <a href="{% if product.id %}{% url 'main:shop_single' product.id %}{% else %}#{% endif %}" class="h2 text-decoration-none text-dark">Cloud Nike Shoes</a>
                            <p class="card-text">
                                Aenean gravida dignissim finibus. Nullam ipsum diam, posuere vitae pharetra sed, commodo ullamcorper.
                            </p>
                            <p class="text-muted">Reviews (48)</p>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-4 mb-4">
                    <div class="card h-100">
                        <a href="{% if product.id %}{% url 'main:shop_single' product.id %}{% else %}#{% endif %}">
                            <img src="{% static './assets/img/feature_prod_03.jpg'%}" class="card-img-top" alt="...">
                        </a>
                        <div class="card-body">
                            <ul class="list-unstyled d-flex justify-content-between">
                                <li>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                    <i class="text-warning fa fa-star"></i>
                                </li>
                                <li class="text-muted text-right">$360.00</li>
                            </ul>
                            <a href="{% if product.id %}{% url 'main:shop_single' product.id %}{% else %}#{% endif %}" class="h2 text-decoration-none text-dark">Summer Addides Shoes</a>
                            <p class="card-text">
                                Curabitur ac mi sit amet diam luctus porta. Phasellus pulvinar sagittis diam, et scelerisque ipsum lobortis nec.
                            </p>
                            <p class="text-muted">Reviews (74)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="container py-5">
        <h2 class="text-center mb-5">Customer Feedback</h2>
    
        <div class="feedback-section mb-5">
            <h3 class="h5 mb-4">What Our Customers Are Saying:</h3>
            <div class="list-group">
                {% for comment in comments %}
                    <div class="list-group-item my-3 border rounded shadow-sm bg-white">
                        <div class="d-flex justify-content-between align-items-start">
                            <!-- Customer Name and Date -->
                            <div>
                                <h5 class="mb-1">{{ comment.full_name }}</h5>
                                <small class="text-muted">{{ comment.created_at|date:"Y-m-d H:i" }}</small>
                            </div>
                            
                            <!-- Product Name (only if the comment is associated with a product) -->
                            {% if comment.product %}
                                <div>
                                    <span class="badge bg-info text-white">Product: {{ comment.product.name }}</span>
                                </div>
                            {% endif %}
                        </div>
                        
                        <!-- Comment Text -->
                        <p class="mb-1">{{ comment.text }}</p>
                        
                        <!-- Rating Section -->
                        <div class="text-warning mb-2">
                            {% for i in "12345" %}
                                {% if forloop.counter <= comment.rating %}
                                    <i class="fa fa-star"></i>
                                {% else %}
                                    <i class="fa fa-star-o"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
    
                        <!-- Show delete button only if the logged-in user is the comment author -->
                        {% if comment.user == request.user %}
                            <a href="{% url 'main:delete_comment' comment.id %}" class="btn btn-danger btn-sm mt-2">Delete</a>
                        {% endif %}
                    </div>
                {% empty %}
                    <div class="list-group-item text-muted">No feedback yet.</div>
                {% endfor %}
            </div>
        </div>
    
        <h3 class="h5 mb-3">Leave Your Feedback</h3>
        <form method="post" class="p-4 border rounded shadow-sm bg-light">
            {% csrf_token %}
            
            <div class="mb-3">
                <label for="id_full_name" class="form-label">Full Name</label>
                <input type="text" class="form-control" id="id_full_name" name="full_name" value="{{ form.full_name.value|default:'' }}" required placeholder="Enter your full name">
            </div>
    
            <div class="mb-3">
                <label for="id_text" class="form-label">Your Comment</label>
                <textarea class="form-control" id="id_text" name="text" rows="4" required placeholder="Write your review...">{{ form.text.value|default:'' }}</textarea>
            </div>
    
            <div class="mb-3">
                <label class="form-label">Rating</label>
                <div class="star-rating">
                    {% for i in '12345' %}
                    <input type="radio" id="star{{ i }}" name="rating" style="font-size: 24px;" value="{{ i }}" class="rating-input " {% if form.rating.value == i %}checked{% endif %} required>
                    <label style="font-size: 24px;" for="star{{ i }}" class="rating-star">&#9733;</label>
                    {% endfor %}
                </div>
            </div>
            
    
            <input type="hidden" name="product_id" value="{{ product.id }}">
    
            <button type="submit" class="btn btn-success w-100 mt-3">Submit</button>
        </form>
    </div>
    

<style>
.star-rating {
    display: flex;
    gap: 5px;  
    flex-direction: row-reverse;
    align-items: center;
    justify-content: left;
    font-size: 50px;  

}

.star-rating input {
    display: none;  
}

.star-rating label {
    font-size: 50px;  
    color: #ddd;  
    cursor: pointer;
    transition: color 0.2s ease-in-out; 
}

.star-rating label:hover,
.star-rating label:hover ~ label {
    color: #ffcc00;  
}

.star-rating input:checked + label {
    color: #ffc107;  
}

.star-rating label:hover,
.star-rating label:hover ~ label {
    color: #f7b500;  
}

.star-rating input:focus + label {
    outline: 2px solid #ffcc00;
}



    body {
    background-color: #f8f9fa;
}


h2, h3 {
    color: #343a40;
    text-align: center;
}

.list-group-item {
    background-color: #ffffff;
    transition: background-color 0.3s;
}

.list-group-item:hover {
    background-color: #e2e6ea;
}

.feedback-section {
    margin-bottom: 30px;
}

input[type="text"],
textarea {
    border-radius: 25px; 
}

.rating {
    display: flex;
    justify-content: space-between;
    width: 200px;  
}

.rating input {
    display: none;  
}

.rating label {
    font-size: 1.5em;
    color: #ddd;  
    cursor: pointer;
}

.rating input:checked ~ label {
    color: #f39c12;  
}

.rating label:hover,
.rating label:hover ~ label {
    color: #f39c12;  
}


</style>    
    <!-- End Featured Product -->
{% endblock content %}
{% block scripts%}
{% include 'components/scripts.html' %} 

{% endblock scripts %}